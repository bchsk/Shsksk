<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سفاري تونس - منصة السفر الجماعي التونسية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Reset and Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }

        :root {
            --primary: #2563EB;
            --primary-light: #60A5FA;
            --primary-dark: #1D4ED8;
            --secondary: #F59E0B;
            --secondary-light: #FBBF24;
            --accent: #10B981;
            --accent-light: #34D399;
            --danger: #EF4444;
            --dark: #1F2937;
            --dark-light: #374151;
            --light: #F9FAFB;
            --gray: #6B7280;
            --gray-light: #E5E7EB;
            --gray-lighter: #F3F4F6;
            --border-radius: 16px;
            --border-radius-sm: 8px;
            --border-radius-lg: 24px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 30px rgba(0,0,0,0.15);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
        }

        h1 {
            font-size: 3.5rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        h2 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 2rem;
            position: relative;
        }

        h2::after {
            content: '';
            position: absolute;
            right: 0;
            bottom: -12px;
            width: 60px;
            height: 4px;
            background: linear-gradient(to left, var(--primary), var(--accent));
            border-radius: 2px;
        }

        h3 {
            font-size: 1.5rem;
            color: var(--dark);
        }

        p {
            color: var(--dark-light);
            margin-bottom: 1rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 14px 32px;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            gap: 10px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #D97706);
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent), #059669);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        .btn-lg {
            padding: 18px 40px;
            font-size: 1.1rem;
        }

        .btn-block {
            width: 100%;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        header.scrolled {
            box-shadow: var(--shadow-md);
            background: rgba(255, 255, 255, 0.98);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark);
        }

        .logo-text span {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .nav-link {
            color: var(--dark-light);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 0;
            position: relative;
            transition: var(--transition);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(to left, var(--primary), var(--accent));
            transition: var(--transition);
            border-radius: 1px;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        .user-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            padding: 160px 0 100px;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1518548419970-58e3b4079ab2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            position: relative;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            text-align: center;
            margin: 0 auto;
        }

        .hero h1 {
            color: white;
            -webkit-text-fill-color: white;
            margin-bottom: 1.5rem;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Search Bar */
        .search-section {
            background: white;
            padding: 32px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            margin-top: -40px;
            position: relative;
            z-index: 2;
        }

        .search-title {
            font-size: 1.5rem;
            margin-bottom: 24px;
            color: var(--dark);
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .search-group {
            position: relative;
        }

        .search-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .search-input, .search-select {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }

        .search-input:focus, .search-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-button {
            align-self: flex-end;
        }

        /* Trips Section */
        .trips-section {
            padding: 100px 0;
            background: white;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .view-all:hover {
            gap: 12px;
        }

        /* Tunisian Cities */
        .tunisian-cities {
            padding: 80px 0;
            background: var(--light);
        }

        .cities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .city-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 24px;
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid transparent;
        }

        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .city-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            color: white;
            font-size: 1.5rem;
        }

        .city-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .trip-count {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Trip Cards */
        .trips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 32px;
        }

        .trip-card {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid var(--gray-light);
        }

        .trip-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .trip-image {
            position: relative;
            height: 240px;
            overflow: hidden;
        }

        .trip-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .trip-card:hover .trip-image img {
            transform: scale(1.05);
        }

        .trip-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            z-index: 2;
        }

        .badge-voting {
            background: linear-gradient(135deg, var(--secondary), #D97706);
        }

        .badge-activated {
            background: linear-gradient(135deg, var(--accent), #059669);
        }

        .badge-completed {
            background: linear-gradient(135deg, var(--gray), #4B5563);
        }

        .trip-content {
            padding: 24px;
        }

        .trip-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .trip-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .trip-location {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .trip-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }

        .trip-price span {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
        }

        .trip-meta {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 20px 0;
            border-top: 1px solid var(--gray-light);
            border-bottom: 1px solid var(--gray-light);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--dark-light);
        }

        .meta-item i {
            color: var(--primary);
        }

        .progress-section {
            margin-bottom: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .progress-label {
            font-size: 0.9rem;
            color: var(--dark-light);
        }

        .progress-value {
            font-weight: 600;
            color: var(--dark);
        }

        .progress-bar {
            height: 8px;
            background: var(--gray-lighter);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--primary));
            border-radius: 4px;
            transition: width 0.6s ease;
        }

        .trip-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .participants {
            display: flex;
            align-items: center;
        }

        .participant-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid white;
            margin-right: -8px;
            background: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .more-participants {
            margin-right: 20px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Trip Details Page */
        .trip-details-page {
            padding: 140px 0 80px;
            background: var(--light);
            min-height: 100vh;
            display: none;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
            text-decoration: none;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .trip-details-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
        }

        .trip-gallery {
            margin-bottom: 30px;
        }

        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: var(--border-radius-lg);
            margin-bottom: 16px;
        }

        .image-thumbnails {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }

        .thumbnail.active, .thumbnail:hover {
            opacity: 1;
            border: 2px solid var(--primary);
        }

        .trip-info h1 {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .organizer-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
        }

        .organizer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .organizer-details h3 {
            margin-bottom: 5px;
        }

        .organizer-rating {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .trip-description {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            margin-bottom: 30px;
        }

        .itinerary-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            margin-bottom: 30px;
        }

        .itinerary-item {
            display: flex;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--gray-light);
        }

        .itinerary-day {
            font-weight: 700;
            color: var(--primary);
            min-width: 100px;
            font-size: 1.1rem;
        }

        .itinerary-content h4 {
            margin-bottom: 8px;
            color: var(--dark);
        }

        /* Booking Panel */
        .booking-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            position: sticky;
            top: 100px;
        }

        .price-box {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--gray-light);
        }

        .price-amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .price-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .participants-info {
            margin-bottom: 30px;
        }

        .participants-count {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .remaining-spots {
            color: var(--danger);
            font-weight: 600;
        }

        .countdown-timer {
            background: var(--gray-lighter);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 30px;
        }

        .timer-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .timer {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .voting-details {
            background: var(--gray-lighter);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
        }

        .voting-step {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }

        .voting-step:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .social-sharing {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }

        .social-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: var(--transition);
            text-decoration: none;
        }

        .whatsapp {
            background: #25D366;
        }

        .twitter {
            background: #1DA1F2;
        }

        .facebook {
            background: #1877F2;
        }

        .copy-link {
            background: var(--primary);
            border: none;
            cursor: pointer;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        /* Agency Page */
        .agency-page {
            padding: 140px 0 80px;
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), 
                        url('https://images.unsplash.com/photo-1551632811-561732d1e306?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            min-height: 100vh;
            display: none;
        }

        .agency-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .agency-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid white;
            margin-bottom: 20px;
        }

        .agency-title {
            color: white;
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .agency-rating {
            color: var(--secondary-light);
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .agency-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .agency-stat {
            text-align: center;
        }

        .agency-stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
        }

        .agency-stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .agency-description {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: var(--border-radius);
            margin: 40px 0;
        }

        .agency-trips {
            background: white;
            padding: 60px 0;
            margin-top: 60px;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }

        .agency-trips .container {
            background: transparent;
        }

        /* How It Works */
        .how-it-works {
            padding: 100px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .step {
            text-align: center;
            padding: 40px 24px;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            position: relative;
        }

        .step:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 24px;
        }

        .step-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .step h3 {
            margin-bottom: 12px;
        }

        /* Testimonials */
        .testimonials {
            padding: 100px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .testimonials-slider {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin-top: 40px;
        }

        .testimonial-card {
            background: white;
            padding: 32px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .testimonial-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            object-fit: cover;
        }

        .testimonial-rating {
            color: var(--secondary);
            margin-top: 4px;
        }

        .testimonial-text {
            font-style: italic;
            color: var(--dark-light);
        }

        /* CTA Section */
        .cta-section {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            text-align: center;
        }

        .cta-section h2 {
            color: white;
            margin-bottom: 24px;
        }

        .cta-section h2::after {
            background: white;
            right: 50%;
            transform: translateX(50%);
        }

        .cta-section p {
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
            margin: 0 auto 40px;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 80px 0 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 48px;
            margin-bottom: 48px;
        }

        .footer-column h3 {
            color: white;
            margin-bottom: 24px;
            font-size: 1.25rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
            padding-right: 8px;
        }

        .social-links {
            display: flex;
            gap: 16px;
            margin-top: 24px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 80px;
            right: 0;
            width: 100%;
            background: white;
            box-shadow: var(--shadow-lg);
            padding: 20px;
            z-index: 999;
        }

        .mobile-nav.active {
            display: block;
        }

        .mobile-nav-links {
            list-style: none;
        }

        .mobile-nav-links li {
            margin-bottom: 16px;
        }

        .mobile-nav-links a {
            display: block;
            padding: 12px;
            color: var(--dark);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .mobile-nav-links a:hover, .mobile-nav-links a.active {
            background: var(--primary);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            h1 {
                font-size: 2.8rem;
            }
            
            h2 {
                font-size: 2rem;
            }
            
            .trip-details-container {
                grid-template-columns: 1fr;
            }
            
            .booking-panel {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 16px;
            }
            
            .nav-links, .user-actions {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero {
                padding: 120px 0 60px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .trips-grid {
                grid-template-columns: 1fr;
            }
            
            .cities-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .steps {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 32px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            
            .agency-stats {
                gap: 20px;
            }
            
            .agency-stat-number {
                font-size: 2rem;
            }
            
            .search-section {
                padding: 24px;
            }
            
            .trip-card {
                margin-bottom: 24px;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* Loading States */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: fadeInUp 0.3s ease;
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 24px;
        }

        /* Page Transitions */
        .page {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .page.active {
            display: block;
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="container header-container">
            <a href="#" class="logo" onclick="showPage('home')">
                <div class="logo-icon">
                    <i class="fas fa-plane"></i>
                </div>
                <div class="logo-text">سفاري<span>تونس</span></div>
            </a>

            <nav class="nav-links">
                <a href="#" class="nav-link active" onclick="showPage('home')">الرئيسية</a>
                <a href="#" class="nav-link" onclick="showPage('trips')">الرحلات</a>
                <a href="#" class="nav-link" onclick="showPage('cities')">ولايات تونس</a>
                <a href="#" class="nav-link" onclick="showPage('how-it-works')">كيف تعمل</a>
                <a href="#" class="nav-link" onclick="showPage('agencies')">الوكالات</a>
            </nav>

            <div class="user-actions">
                <a href="#" class="btn btn-outline" onclick="redirectToLogin()">تسجيل الدخول</a>
                <a href="#" class="btn btn-primary" onclick="redirectToAgencyLogin()">أنشئ رحلة</a>
            </div>

            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Mobile Navigation -->
        <div class="mobile-nav" id="mobileNav">
            <ul class="mobile-nav-links">
                <li><a href="#" class="active" onclick="showPage('home')">الرئيسية</a></li>
                <li><a href="#" onclick="showPage('trips')">الرحلات</a></li>
                <li><a href="#" onclick="showPage('cities')">ولايات تونس</a></li>
                <li><a href="#" onclick="showPage('how-it-works')">كيف تعمل</a></li>
                <li><a href="#" onclick="showPage('agencies')">الوكالات</a></li>
                <li><a href="#" class="btn btn-primary" style="margin-top: 20px; width: 100%;" onclick="redirectToAgencyLogin()">أنشئ رحلة</a></li>
            </ul>
        </div>
    </header>

    <!-- Home Page -->
    <div class="page active" id="home-page">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>استكشف تونس مع رفقاء سفر رائعين</h1>
                    <p class="hero-subtitle">انضم إلى مجتمع المسافرين التونسيين، اكتشف رحلات جماعية مثيرة، وصوّت للرحلات التي تعجبك لتفعيلها. سافر بذكاء وبأقل تكلفة.</p>
                    
                    <a href="#" class="btn btn-primary btn-lg" onclick="showPage('trips')">
                        <i class="fas fa-compass"></i>
                        اكتشف الرحلات الآن
                    </a>
                </div>
            </div>
        </section>

        <!-- Search Section -->
        <section class="search-section">
            <div class="container">
                <h3 class="search-title">ابحث عن رحلتك المثالية في تونس</h3>
                <div class="search-form" id="searchForm">
                    <div class="search-group">
                        <label>الوجهة</label>
                        <select class="search-select" id="citySelect">
                            <option value="">جميع الولايات</option>
                            <option value="tunis">تونس العاصمة</option>
                            <option value="nabeul">نابل</option>
                            <option value="sousse">سوسة</option>
                            <option value="sfax">صفاقس</option>
                            <option value="sidi-bouzid">سيدي بوزيد</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <label>نوع الرحلة</label>
                        <select class="search-select" id="typeSelect">
                            <option value="">جميع الأنواع</option>
                            <option value="beach">شاطئ</option>
                            <option value="desert">صحراء</option>
                            <option value="mountain">جبل</option>
                            <option value="culture">ثقافي</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <label>التاريخ</label>
                        <input type="text" class="search-input" placeholder="أي تاريخ" id="dateInput">
                    </div>
                    <div class="search-group">
                        <label>الميزانية</label>
                        <select class="search-select" id="budgetSelect">
                            <option value="">أي ميزانية</option>
                            <option value="budget">اقتصادي (أقل من 200 دينار)</option>
                            <option value="standard">متوسط (200-500 دينار)</option>
                            <option value="luxury">فاخر (أكثر من 500 دينار)</option>
                        </select>
                    </div>
                    <div class="search-group search-button">
                        <button class="btn btn-primary btn-block" onclick="filterTrips()">
                            <i class="fas fa-search"></i>
                            بحث
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Trips -->
        <section class="trips-section">
            <div class="container">
                <div class="section-header">
                    <h2>أشهر الرحلات</h2>
                    <a href="#" class="view-all" onclick="showPage('trips')">
                        عرض جميع الرحلات
                        <i class="fas fa-arrow-left"></i>
                    </a>
                </div>

                <div class="trips-grid" id="featuredTripsGrid">
                    <!-- Featured trips will be loaded by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Tunisian Cities -->
        <section class="tunisian-cities">
            <div class="container">
                <h2>اكتشف ولايات تونس</h2>
                <p>اختر الولاية التي تريد استكشافها مع مجتمع المسافرين</p>

                <div class="cities-grid" id="citiesGrid">
                    <!-- Tunisian cities will be loaded by JavaScript -->
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section class="how-it-works">
            <div class="container">
                <h2>كيف تعمل المنصة</h2>
                <p style="text-align: center; max-width: 700px; margin: 0 auto 40px;">ثلاث خطوات بسيطة تفصل بينك وبين رحلتك المثالية</p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="fas fa-search-location"></i>
                        </div>
                        <h3>اكتشف رحلات</h3>
                        <p>تصفح الرحلات المتاحة في جميع ولايات تونس. كل رحلة تحتوي على تفاصيل كاملة عن البرنامج والتكاليف والجدول الزمني.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="fas fa-vote-yea"></i>
                        </div>
                        <h3>صوّت للتفعيل</h3>
                        <p>صوّت للرحلات التي تريدها. عندما تصل الرحلة للحد الأدنى من الأصوات، يتم تفعيلها وفتح باب الحجز. يمكنك التصويت لأكثر من رحلة.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>انضم وسافر</h3>
                        <p>انضم للرحلة المفعلة، تعرف على رفاق السفر التونسيين، واستعد لمغامرة لا تُنسى في أجمل مناطق تونس.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Agencies Section -->
        <section class="trips-section">
            <div class="container">
                <div class="section-header">
                    <h2>الوكالات المتعاونة</h2>
                    <a href="#" class="view-all" onclick="showPage('agencies')">
                        عرض جميع الوكالات
                        <i class="fas fa-arrow-left"></i>
                    </a>
                </div>

                <div class="trips-grid" id="agenciesGrid">
                    <!-- Agencies will be loaded by JavaScript -->
                </div>
            </div>
        </section>
    </div>

    <!-- Trips Page -->
    <div class="page" id="trips-page">
        <section class="trips-section" style="padding-top: 140px;">
            <div class="container">
                <a href="#" class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للرئيسية
                </a>

                <div class="section-header">
                    <h2>جميع الرحلات المتاحة</h2>
                    <div class="view-all">
                        <span id="tripsCount">0</span> رحلة متاحة
                    </div>
                </div>

                <div class="search-section" style="margin: 0 0 40px 0;">
                    <div class="search-form">
                        <div class="search-group">
                            <label>الولاية</label>
                            <select class="search-select" id="tripsCitySelect">
                                <option value="">جميع الولايات</option>
                                <option value="tunis">تونس العاصمة</option>
                                <option value="nabeul">نابل</option>
                                <option value="sousse">سوسة</option>
                                <option value="sfax">صفاقس</option>
                                <option value="sidi-bouzid">سيدي بوزيد</option>
                                <option value="monastir">المنستير</option>
                                <option value="mahdia">المهدية</option>
                                <option value="gabes">قابس</option>
                                <option value="tataouine">تطاوين</option>
                                <option value="medenine">مدنين</option>
                                <option value="kebili">قبلي</option>
                                <option value="tozeur">توزر</option>
                                <option value="gafsa">قفصة</option>
                                <option value="kairouan">القيروان</option>
                                <option value="bizerte">بنزرت</option>
                                <option value="beja">باجة</option>
                                <option value="jendouba">جندوبة</option>
                                <option value="kef">الكاف</option>
                                <option value="siliana">سليانة</option>
                                <option value="kasserine">القصرين</option>
                                <option value="zaghouan">زغوان</option>
                            </select>
                        </div>
                        <div class="search-group">
                            <label>حالة الرحلة</label>
                            <select class="search-select" id="tripsStatusSelect">
                                <option value="">جميع الحالات</option>
                                <option value="voting">قيد التصويت</option>
                                <option value="activated">مفعلة</option>
                                <option value="completed">مكتملة</option>
                            </select>
                        </div>
                        <div class="search-group">
                            <label>السعر</label>
                            <select class="search-select" id="tripsPriceSelect">
                                <option value="">أي سعر</option>
                                <option value="0-100">أقل من 100 دينار</option>
                                <option value="100-300">100 - 300 دينار</option>
                                <option value="300-500">300 - 500 دينار</option>
                                <option value="500+">أكثر من 500 دينار</option>
                            </select>
                        </div>
                        <div class="search-group search-button">
                            <button class="btn btn-primary btn-block" onclick="filterAllTrips()">
                                <i class="fas fa-filter"></i>
                                تصفية
                            </button>
                        </div>
                    </div>
                </div>

                <div class="trips-grid" id="allTripsGrid">
                    <!-- All trips will be loaded by JavaScript -->
                </div>
            </div>
        </section>
    </div>

    <!-- Trip Details Page -->
    <div class="page" id="trip-details-page">
        <section class="trip-details-page">
            <div class="container">
                <a href="#" class="back-btn" onclick="showPage('trips')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للرحلات
                </a>

                <div class="trip-details-container" id="tripDetailsContainer">
                    <!-- Trip details will be loaded by JavaScript -->
                </div>
            </div>
        </section>
    </div>

    <!-- Cities Page -->
    <div class="page" id="cities-page">
        <section class="tunisian-cities" style="padding-top: 140px;">
            <div class="container">
                <a href="#" class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للرئيسية
                </a>

                <h2>جميع ولايات تونس</h2>
                <p style="text-align: center; margin-bottom: 40px;">اختر الولاية التي تريد استكشاف رحلاتها</p>

                <div class="cities-grid" id="allCitiesGrid">
                    <!-- All Tunisian cities will be loaded by JavaScript -->
                </div>

                <div style="margin-top: 60px; padding: 40px; background: white; border-radius: var(--border-radius); box-shadow: var(--shadow-md);">
                    <h3 style="text-align: center; margin-bottom: 30px;">لماذا تسافر مع سفاري تونس؟</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px;">
                        <div style="text-align: center;">
                            <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--primary-light), var(--primary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 1.8rem;">
                                <i class="fas fa-users"></i>
                            </div>
                            <h4>مجتمع تونسي</h4>
                            <p>انضم إلى أكبر مجتمع للمسافرين التونسيين</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--accent-light), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 1.8rem;">
                                <i class="fas fa-hand-holding-usd"></i>
                            </div>
                            <h4>أسعار مناسبة</h4>
                            <p>رحلات جماعية بأسعار أقل من السوق</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 70px; height: 70px; background: linear-gradient(135deg, var(--secondary-light), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 1.8rem;">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h4>آمن وموثوق</h4>
                            <p>جميع الوكالات والمنظمين موثوقين</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- How It Works Page -->
    <div class="page" id="how-it-works-page">
        <section class="how-it-works" style="padding-top: 140px;">
            <div class="container">
                <a href="#" class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للرئيسية
                </a>

                <h2>كيفية استخدام المنصة</h2>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>انشاء حساب</h3>
                        <p>سجّل حسابًا مجانيًا في أقل من دقيقة. يمكنك استخدام حسابك للتصويت على الرحلات والمشاركة فيها.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>تصفح الرحلات</h3>
                        <p>استخدم فلاتر البحث للعثور على الرحلات المناسبة لاهتماماتك وميزانيتك. يمكنك تصفح حسب الولاية أو نوع الرحلة.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="fas fa-vote-yea"></i>
                        </div>
                        <h3>صوّت للرحلات</h3>
                        <p>صوّت للرحلات التي تريدها. يمكنك التصويت لأكثر من رحلة. التصويت يساعد في تفعيل الرحلة عند الوصول للعدد المطلوب.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3>احجز مقعدك</h3>
                        <p>عند تفعيل الرحلة، ستتلقى إشعارًا ويمكنك حجز مقعدك. الدفع آمن ومضمون.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-icon">
                            <i class="fas fa-plane-departure"></i>
                        </div>
                        <h3>استعد للسفر</h3>
                        <p>احصل على جميع التفاصيل والتجهيزات قبل الرحلة. تعرف على رفاق السفر واستعد لمغامرة لا تُنسى.</p>
                    </div>

                    <div class="step">
                        <div class="step-number">6</div>
                        <div class="step-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3>قيم تجربتك</h3>
                        <p>بعد الرحلة، يمكنك تقييم التجربة والمنظم لمساعدة الآخرين في اختيار الرحلات المناسبة.</p>
                    </div>
                </div>

                <div style="margin-top: 60px; padding: 40px; background: white; border-radius: var(--border-radius); box-shadow: var(--shadow-md);">
                    <h3 style="text-align: center; margin-bottom: 30px;">أسئلة شائعة</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">كيف يعمل نظام التصويت؟</h4>
                            <p>التصويت لا يلزمك بالحجز. هو مجرد تعبير عن اهتمامك بالرحلة. عندما تصل للعدد المطلوب من الأصوات، يتم تفعيلها.</p>
                        </div>
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">هل يمكنني التصويت لأكثر من رحلة؟</h4>
                            <p>نعم، يمكنك التصويت لأكثر من رحلة. هذا يساعدنا في معرفة الرحلات الأكثر شعبية.</p>
                        </div>
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 10px;">ماذا يحدث إذا لم تصل الرحلة للعدد المطلوب؟</h4>
                            <p>إذا لم تصل الرحلة للعدد المطلوب خلال الوقت المحدد، يتم إلغاؤها ولا يتم خصم أي مبلغ.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Agencies Page -->
    <div class="page" id="agencies-page">
        <section class="trips-section" style="padding-top: 140px;">
            <div class="container">
                <a href="#" class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للرئيسية
                </a>

                <div class="section-header">
                    <h2>الوكالات المتعاونة</h2>
                    <div class="view-all">
                        <span id="agenciesCount">0</span> وكالة معتمدة
                    </div>
                </div>

                <div class="trips-grid" id="allAgenciesGrid">
                    <!-- All agencies will be loaded by JavaScript -->
                </div>
            </div>
        </section>
    </div>

    <!-- Agency Details Page -->
    <div class="page" id="agency-details-page">
        <section class="agency-page">
            <div class="container">
                <a href="#" class="back-btn" style="color: white;" onclick="showPage('agencies')">
                    <i class="fas fa-arrow-right"></i>
                    العودة للوكالات
                </a>

                <div class="agency-header" id="agencyHeader">
                    <!-- Agency details will be loaded by JavaScript -->
                </div>

                <div class="agency-description" id="agencyDescription">
                    <!-- Agency description will be loaded by JavaScript -->
                </div>

                <div class="agency-stats" id="agencyStats">
                    <!-- Agency stats will be loaded by JavaScript -->
                </div>
            </div>

            <div class="agency-trips">
                <div class="container">
                    <h3 style="margin-bottom: 40px;">رحلات الوكالة</h3>
                    <div class="trips-grid" id="agencyTripsGrid">
                        <!-- Agency trips will be loaded by JavaScript -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>سفاري تونس</h3>
                    <p>منصة تونسية رائدة للسفر الجماعي، تجمع المسافرين التونسيين لتنظيم رحلات مميزة بأسعار مناسبة في جميع ولايات تونس.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>روابط سريعة</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('home')">الرئيسية</a></li>
                        <li><a href="#" onclick="showPage('trips')">الرحلات</a></li>
                        <li><a href="#" onclick="showPage('cities')">ولايات تونس</a></li>
                        <li><a href="#" onclick="showPage('how-it-works')">كيف تعمل</a></li>
                        <li><a href="#" onclick="showPage('agencies')">الوكالات</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>المساعدة</h3>
                    <ul class="footer-links">
                        <li><a href="#">الأسئلة الشائعة</a></li>
                        <li><a href="#">سياسة الخصوصية</a></li>
                        <li><a href="#">شروط الاستخدام</a></li>
                        <li><a href="#">اتصل بنا</a></li>
                        <li><a href="#">مركز المساعدة</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>تواصل معنا</h3>
                    <p>شارع الحبيب بورقيبة، تونس العاصمة، تونس</p>
                    <p>البريد الإلكتروني: info@safaritunis.tn</p>
                    <p>الهاتف: +216 70 000 000</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showNotification('جاري إرسال طلبك...')">طلب تواصل</button>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>© 2024 سفاري تونس. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <!-- Voting Modal -->
    <div class="modal" id="voteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>صوّت للرحلة</h3>
                <button class="modal-close" id="closeVoteModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>بالتصويت لهذه الرحلة أنت تساعد في تفعيلها. يمكنك التصويت لأكثر من رحلة.</p>
                
                <div style="margin: 24px 0; padding: 20px; background: var(--gray-lighter); border-radius: var(--border-radius);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span>الأصوات الحالية:</span>
                        <strong id="currentVoters">0</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span>المطلوب للتفعيل:</span>
                        <strong id="requiredVoters">0</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>المتبقي:</span>
                        <strong id="remainingVoters">0</strong>
                    </div>
                </div>

                <div class="voting-details" style="margin: 20px 0;">
                    <h4 style="margin-bottom: 15px; color: var(--dark);">خطوات بعد التصويت:</h4>
                    <div class="voting-step">
                        <div class="step-number">1</div>
                        <div>
                            <strong>سيتم إشعارك</strong>
                            <p style="font-size: 0.9rem; color: var(--gray); margin-top: 5px;">عند وصول الرحلة للعدد المطلوب</p>
                        </div>
                    </div>
                    <div class="voting-step">
                        <div class="step-number">2</div>
                        <div>
                            <strong>اختيار الدفع</strong>
                            <p style="font-size: 0.9rem; color: var(--gray); margin-top: 5px;">يمكنك حجز مقعدك بالكامل أو بدفع جزئي</p>
                        </div>
                    </div>
                    <div class="voting-step">
                        <div class="step-number">3</div>
                        <div>
                            <strong>التجهيز للسفر</strong>
                            <p style="font-size: 0.9rem; color: var(--gray); margin-top: 5px;">ستحصل على جميع التفاصيل والتجهيزات</p>
                        </div>
                    </div>
                </div>

                <button class="btn btn-success btn-block" id="confirmVote" style="margin-top: 20px;">
                    <i class="fas fa-vote-yea"></i>
                    صوّت الآن
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-body" style="text-align: center; padding: 40px;">
                <div style="font-size: 4rem; color: var(--accent); margin-bottom: 20px;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 style="margin-bottom: 15px;">تم التصويت بنجاح!</h3>
                <p style="color: var(--gray); margin-bottom: 30px;">
                    تمت إضافة صوتك للرحلة. سنقوم بإشعارك عند تفعيل الرحلة لاستكمال الحجز.
                </p>
                <button class="btn btn-primary" id="closeSuccessModal">حسناً</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== JavaScript الكامل للواجهة الرئيسية ====================

        // ==================== خدمات الأمان والاتصال ====================

        // خدمة التحقق من الهوية
        class AuthService {
            static getToken() {
                return localStorage.getItem('auth_token');
            }

            static getUserInfo() {
                const token = this.getToken();
                if (!token) return null;

                try {
                    return JSON.parse(atob(token.split('.')[1]));
                } catch {
                    return null;
                }
            }

            static isTokenValid() {
                const token = this.getToken();
                if (!token) return false;

                try {
                    const payload = JSON.parse(atob(token.split('.')[1]));
                    const now = Date.now() / 1000;
                    return payload.exp > now;
                } catch {
                    return false;
                }
            }

            static logout() {
                localStorage.removeItem('auth_token');
                localStorage.removeItem('user_info');
                window.location.href = '/login';
            }
        }

        // خدمة الاتصالات مع Backend
        class ApiService {
            static async request(url, options = {}) {
                const token = AuthService.getToken();

                const defaultOptions = {
                    headers: {
                        'Content-Type': 'application/json',
                        ...(token && { 'Authorization': `Bearer ${token}` })
                    },
                    ...options
                };

                try {
                    const response = await fetch(url, defaultOptions);

                    // التحقق من صلاحية التوكن
                    if (response.status === 401) {
                        AuthService.logout();
                        throw new Error('تم تسجيل خروجك لأسباب أمنية');
                    }

                    if (!response.ok) {
                        throw new Error(`HTTP Error: ${response.status} - ${response.statusText}`);
                    }

                    const data = await response.json();

                    if (!data.success) {
                        throw new Error(data.error || 'حدث خطأ غير معروف');
                    }

                    return data;
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }

            static async get(url) {
                return this.request(url, { method: 'GET' });
            }

            static async post(url, data) {
                return this.request(url, {
                    method: 'POST',
                    body: JSON.stringify(data)
                });
            }

            static async put(url, data) {
                return this.request(url, {
                    method: 'PUT',
                    body: JSON.stringify(data)
                });
            }

            static async delete(url) {
                return this.request(url, { method: 'DELETE' });
            }
        }

        // خدمة الإشعارات
        class NotificationService {
            static show(message, type = 'info') {
                // إنشاء عنصر الإشعار
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    left: 20px;
                    background: ${type === 'success' ? '#10B981' : type === 'error' ? '#EF4444' : '#2563EB'};
                    color: white;
                    padding: 16px 24px;
                    border-radius: var(--border-radius);
                    box-shadow: var(--shadow-lg);
                    z-index: 3000;
                    transform: translateX(-150%);
                    transition: transform 0.3s ease;
                    max-width: 400px;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // إظهار الإشعار
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 10);
                
                // إزالة الإشعار بعد 3 ثوان
                setTimeout(() => {
                    notification.style.transform = 'translateX(-150%)';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }

            static success(message) {
                this.show(message, 'success');
            }

            static error(message) {
                this.show(message, 'error');
            }

            static info(message) {
                this.show(message, 'info');
            }
        }

        // ==================== الحالة الحالية ====================

        let currentSection = 'home';
        let currentTripId = null;
        let currentAgencyId = null;
        let featuredTrips = [];
        let allTrips = [];
        let agenciesData = [];
        let tunisianCities = [];

        // ==================== تهيئة الصفحة ====================

        document.addEventListener('DOMContentLoaded', function() {
            // تحقق من تسجيل الدخول
            const userInfo = AuthService.getUserInfo();
            if (userInfo) {
                NotificationService.info(`مرحباً ${userInfo.name}!`);
            }

            // تحميل البيانات
            loadInitialData();
            setupEventListeners();
            
            // التحقق من الصفحة المطلوبة من URL
            initPageFromHash();
        });

        // ==================== تحميل البيانات ====================

        // تحميل البيانات الأولية
        async function loadInitialData() {
            try {
                // تحميل الرحلات المميزة
                const featuredResponse = await ApiService.get('/api/trips/featured');
                if (featuredResponse.success) {
                    featuredTrips = featuredResponse.trips;
                    renderFeaturedTrips();
                }

                // تحميل جميع الرحلات
                const allTripsResponse = await ApiService.get('/api/trips');
                if (allTripsResponse.success) {
                    allTrips = allTripsResponse.trips;
                    updateTripsCount();
                }

                // تحميل الوكالات
                const agenciesResponse = await ApiService.get('/api/agencies');
                if (agenciesResponse.success) {
                    agenciesData = agenciesResponse.agencies;
                    renderAgencies();
                }

                // تحميل ولايات تونس
                const citiesResponse = await ApiService.get('/api/cities');
                if (citiesResponse.success) {
                    tunisianCities = citiesResponse.cities;
                    renderCities();
                    renderAllCities();
                }

            } catch (error) {
                console.error('Error loading initial data:', error);
                NotificationService.error('فشل في تحميل البيانات');
            }
        }

        // ==================== عرض البيانات ====================

        // عرض الرحلات المميزة
        function renderFeaturedTrips() {
            const container = document.getElementById('featuredTripsGrid');
            container.innerHTML = '';
            
            const featuredTripsToShow = featuredTrips.slice(0, 3);
            
            featuredTripsToShow.forEach(trip => {
                container.appendChild(createTripCard(trip));
            });
        }

        // عرض جميع الرحلات
        function renderAllTrips(filteredTrips = null) {
            const container = document.getElementById('allTripsGrid');
            container.innerHTML = '';
            
            const tripsToRender = filteredTrips || allTrips;
            
            tripsToRender.forEach(trip => {
                container.appendChild(createTripCard(trip));
            });
            
            updateTripsCount(tripsToRender.length);
        }

        // عرض الوكالات
        function renderAgencies() {
            const container = document.getElementById('agenciesGrid');
            container.innerHTML = '';
            
            const featuredAgencies = agenciesData.slice(0, 2);
            
            featuredAgencies.forEach(agency => {
                container.appendChild(createAgencyCard(agency));
            });
        }

        // عرض جميع الوكالات
        function renderAllAgencies() {
            const container = document.getElementById('allAgenciesGrid');
            container.innerHTML = '';
            
            agenciesData.forEach(agency => {
                container.appendChild(createAgencyCard(agency));
            });
            
            updateAgenciesCount();
        }

        // عرض المدن
        function renderCities() {
            const container = document.getElementById('citiesGrid');
            container.innerHTML = '';
            
            const featuredCities = tunisianCities.slice(0, 8);
            
            featuredCities.forEach(city => {
                container.appendChild(createCityCard(city));
            });
        }

        // عرض جميع المدن
        function renderAllCities() {
            const container = document.getElementById('allCitiesGrid');
            container.innerHTML = '';
            
            tunisianCities.forEach(city => {
                container.appendChild(createCityCard(city));
            });
        }

        // ==================== إنشاء عناصر الواجهة ====================

        // إنشاء بطاقة رحلة
        function createTripCard(trip) {
            const progressPercentage = Math.min((trip.votes / trip.required) * 100, 100);
            const remaining = trip.required - trip.votes;
            
            const tripCard = document.createElement('div');
            tripCard.className = 'trip-card animate-fadeInUp';
            
            tripCard.innerHTML = `
                <div class="trip-image">
                    <img src="${trip.image}" alt="${trip.title}">
                    <span class="trip-badge badge-${trip.status}">${getStatusText(trip.status)}</span>
                </div>
                <div class="trip-content">
                    <div class="trip-header">
                        <div>
                            <h3 class="trip-title">${trip.title}</h3>
                            <div class="trip-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${trip.state}</span>
                            </div>
                        </div>
                        <div class="trip-price">
                            ${trip.price}
                            <span>${trip.currency}/للشخص</span>
                        </div>
                    </div>
                    
                    <div class="trip-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar"></i>
                            <span>${trip.date}</span>
                        </div>
                        <div class="meta-item">
                            <i class="far fa-clock"></i>
                            <span>${trip.duration}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-building"></i>
                            <span>${trip.organizer}</span>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="progress-header">
                            <span class="progress-label">التقدم نحو التفعيل</span>
                            <span class="progress-value">${Math.round(progressPercentage)}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--gray); margin-top: 8px;">
                            ${remaining > 0 ? `بحاجة إلى ${remaining} صوت${remaining > 1 ? 'ات' : ''}` : 'مكتمل'}
                        </p>
                    </div>
                    
                    <div class="trip-footer">
                        <div class="participants">
                            <div class="more-participants">${trip.votes} صوت</div>
                            ${generateParticipantAvatars(3)}
                        </div>
                        <button class="btn ${trip.status === 'activated' ? 'btn-success' : 'btn-primary'} vote-btn" 
                                data-id="${trip.id}"
                                data-votes="${trip.votes}"
                                data-required="${trip.required}">
                            <i class="fas ${trip.status === 'activated' ? 'fa-user-plus' : 'fa-vote-yea'}"></i>
                            ${trip.status === 'activated' ? 'احجز الآن' : 'صوّت للرحلة'}
                        </button>
                    </div>
                </div>
            `;
            
            // إضافة حدث النقر لبطاقة الرحلة
            tripCard.addEventListener('click', function(e) {
                if (!e.target.closest('.vote-btn')) {
                    showTripDetails(trip.id);
                }
            });
            
            // إضافة حدث النقر لزر التصويت
            const voteBtn = tripCard.querySelector('.vote-btn');
            voteBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                const id = parseInt(this.dataset.id);
                const votes = parseInt(this.dataset.votes);
                const required = parseInt(this.dataset.required);
                
                if (this.classList.contains('btn-success')) {
                    // احجز الآن
                    showNotification('سيتم توجيهك إلى صفحة الحجز', 'info');
                } else {
                    // صوّت
                    openVoteModal(id, votes, required);
                }
            });
            
            return tripCard;
        }

        // إنشاء بطاقة وكالة
        function createAgencyCard(agency) {
            const agencyCard = document.createElement('div');
            agencyCard.className = 'trip-card';
            
            agencyCard.innerHTML = `
                <div class="trip-image">
                    <img src="${agency.logo}" alt="${agency.name}" style="object-fit: contain; background: white;">
                </div>
                <div class="trip-content">
                    <div class="trip-header">
                        <div>
                            <h3 class="trip-title">${agency.name}</h3>
                            <div class="trip-location">
                                <i class="fas fa-star" style="color: var(--secondary);"></i>
                                <span>${agency.rating} تقييم</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="trip-meta">
                        <div class="meta-item">
                            <i class="fas fa-plane"></i>
                            <span>${agency.stats.trips} رحلة</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-users"></i>
                            <span>${agency.stats.travelers} مسافر</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-history"></i>
                            <span>${agency.stats.years} سنة</span>
                        </div>
                    </div>
                    
                    <p style="color: var(--dark-light); font-size: 0.95rem; margin: 15px 0; line-height: 1.6;">
                        ${agency.description.substring(0, 100)}...
                    </p>
                    
                    <div class="trip-footer">
                        <div class="participants">
                            <div class="more-participants">${agency.stats.cities} ولاية</div>
                        </div>
                        <button class="btn btn-primary view-agency-btn" data-id="${agency.id}">
                            <i class="fas fa-eye"></i>
                            عرض الوكالة
                        </button>
                    </div>
                </div>
            `;
            
            // إضافة حدث النقر لبطاقة الوكالة
            agencyCard.addEventListener('click', function(e) {
                if (!e.target.closest('.view-agency-btn')) {
                    showAgencyDetails(agency.id);
                }
            });
            
            // إضافة حدث النقر لزر العرض
            const viewBtn = agencyCard.querySelector('.view-agency-btn');
            viewBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                const id = parseInt(this.dataset.id);
                showAgencyDetails(id);
            });
            
            return agencyCard;
        }

        // إنشاء بطاقة مدينة
        function createCityCard(city) {
            const cityCard = document.createElement('div');
            cityCard.className = 'city-card';
            cityCard.dataset.city = city.name.toLowerCase().replace(/ /g, '-');
            
            cityCard.innerHTML = `
                <div class="city-icon">
                    <i class="${city.icon}"></i>
                </div>
                <h3 class="city-name">${city.name}</h3>
                <p class="trip-count">${city.trips} رحلة متاحة</p>
            `;
            
            cityCard.addEventListener('click', function() {
                showPage('trips');
                setTimeout(() => {
                    document.getElementById('tripsCitySelect').value = city.name.toLowerCase().replace(/ /g, '-');
                    filterAllTrips();
                }, 100);
            });
            
            return cityCard;
        }

        // إنشاء صور المشاركين
        function generateParticipantAvatars(count) {
            let avatars = '';
            const colors = ['#2563EB', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6'];
            
            for (let i = 0; i < count; i++) {
                avatars += `<div class="participant-avatar" style="background-color: ${colors[i % colors.length]}; z-index: ${count - i};">${i + 1}</div>`;
            }
            
            return avatars;
        }

        // ==================== التفاعل مع المستخدم ====================

        // إعداد مستمعي الأحداث
        function setupEventListeners() {
            // Header scroll effect
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    document.getElementById('header').classList.add('scrolled');
                } else {
                    document.getElementById('header').classList.remove('scrolled');
                }
            });

            // Mobile menu
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileNav = document.getElementById('mobileNav');
            
            mobileMenuBtn.addEventListener('click', function() {
                mobileNav.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.header-container') && !e.target.closest('.mobile-nav')) {
                    mobileNav.classList.remove('active');
                }
            });

            // Modal close buttons
            document.getElementById('closeVoteModal').addEventListener('click', function() {
                closeModal('voteModal');
            });

            document.getElementById('closeSuccessModal').addEventListener('click', function() {
                closeModal('successModal');
            });

            // Confirm vote
            document.getElementById('confirmVote').addEventListener('click', function() {
                if (currentTripId) {
                    voteForTrip(currentTripId);
                }
            });

            // Close modal on outside click
            document.getElementById('voteModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal('voteModal');
                }
            });

            // Search form submission
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                filterTrips();
            });

            // Initialize tooltips
            initializeTooltips();
        }

        // إظهار رسالة
        function showNotification(message, type = 'info') {
            NotificationService.show(message, type);
        }

        // إظهار صفحة معينة
        function showPage(pageName) {
            // إخفاء جميع الصفحات
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // إظهار الصفحة المطلوبة
            document.getElementById(pageName + '-page').classList.add('active');
            
            // تحديث التنقل
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // تحديث القائمة الجانبية
            document.querySelectorAll('.mobile-nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            // تحديث الرابط النشط
            const activeLink = document.querySelector(`.nav-link[onclick*="${pageName}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // تحديث الصفحة الحالية
            currentSection = pageName;
            
            // إغلاق القائمة الجانبية
            document.getElementById('mobileNav').classList.remove('active');
            
            // التمرير إلى الأعلى
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // إظهار تفاصيل الرحلة
        function showTripDetails(tripId) {
            // في الإنتاج، سيتم تحميل بيانات الرحلة من API
            const trip = allTrips.find(t => t.id === tripId);
            if (!trip) return;
            
            currentTripId = tripId;
            
            const progressPercentage = Math.min((trip.votes / trip.required) * 100, 100);
            const remaining = trip.required - trip.votes;
            
            const tripDetailsContainer = document.getElementById('tripDetailsContainer');
            tripDetailsContainer.innerHTML = `
                <!-- Trip Details -->
                <div class="trip-details">
                    <div class="trip-gallery">
                        <img src="${trip.image}" alt="${trip.title}" class="main-image" id="tripMainImage">
                        
                        <div class="image-thumbnails" id="tripThumbnails">
                            ${trip.gallery ? trip.gallery.map((img, index) => `
                                <img src="${img}" alt="${trip.title}" class="thumbnail ${index === 0 ? 'active' : ''}" data-index="${index}">
                            `).join('') : ''}
                        </div>
                    </div>
                    
                    <div class="trip-info">
                        <h1>${trip.title}</h1>
                        
                        <div class="organizer-info">
                            <img src="${agenciesData.find(a => a.id === trip.organizerId)?.logo || 'https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}" 
                                 alt="${trip.organizer}" class="organizer-avatar">
                            <div class="organizer-details">
                                <h3>${trip.organizer}</h3>
                                <div class="organizer-rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <span> ${agenciesData.find(a => a.id === trip.organizerId)?.rating || 4.5}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="trip-description">
                            <h3 style="margin-bottom: 20px;">عن الرحلة</h3>
                            <p>${trip.description}</p>
                        </div>
                        
                        <div class="itinerary-section">
                            <h3 style="margin-bottom: 20px;">برنامج الرحلة</h3>
                            <div id="tripItinerary">
                                ${trip.itinerary ? trip.itinerary.map(item => `
                                    <div class="itinerary-item">
                                        <div class="itinerary-day">${item.day}</div>
                                        <div class="itinerary-content">
                                            <h4>${item.title}</h4>
                                            <p>${item.description}</p>
                                        </div>
                                    </div>
                                `).join('') : ''}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Booking Panel -->
                <div class="booking-panel">
                    <div class="price-box">
                        <div class="price-amount">${trip.price} <span>${trip.currency}</span></div>
                        <div class="price-label">للشخص (${trip.duration})</div>
                    </div>
                    
                    <div class="participants-info">
                        <div class="participants-count">
                            <span>الأصوات الحالية: <strong>${trip.votes}</strong></span>
                            <span class="remaining-spots">المتبقي: <strong>${remaining}</strong></span>
                        </div>
                        
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-label">التقدم نحو التفعيل</span>
                                <span class="progress-value">${Math.round(progressPercentage)}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <p>الحد الأدنى للتفعيل: <strong>${trip.required}</strong> صوت</p>
                        </div>
                    </div>
                    
                    <div class="countdown-timer">
                        <div class="timer-label">الوقت المتبقي للتصويت</div>
                        <div class="timer">${getRandomDays()} يوم</div>
                    </div>
                    
                    <div class="voting-details">
                        <h4 style="margin-bottom: 15px; color: var(--dark);">معلومات التصويت:</h4>
                        <p style="font-size: 0.9rem; color: var(--gray);">
                            <i class="fas fa-info-circle" style="color: var(--primary); margin-left: 5px;"></i>
                            يمكنك التصويت لأكثر من رحلة. التصويت لا يلزمك بالحجز.
                        </p>
                        <p style="font-size: 0.9rem; color: var(--gray); margin-top: 10px;">
                            <i class="fas fa-shield-alt" style="color: var(--accent); margin-left: 5px;"></i>
                            نضمن استرداد كامل المبلغ في حال عدم تفعيل الرحلة.
                        </p>
                    </div>
                    
                    <div class="status-badge badge-${trip.status}" style="margin: 20px 0; text-align: center; display: block;">
                        ${getStatusText(trip.status)}
                    </div>
                    
                    <button class="btn ${trip.status === 'activated' ? 'btn-success' : 'btn-primary'} btn-block" 
                            id="tripVoteBtn"
                            style="margin-bottom: 20px;">
                        <i class="fas ${trip.status === 'activated' ? 'fa-user-plus' : 'fa-vote-yea'}"></i>
                        ${trip.status === 'activated' ? 'احجز مقعدك الآن' : 'صوّت لهذه الرحلة'}
                    </button>
                    
                    <div class="social-sharing">
                        <a href="#" class="social-btn whatsapp" onclick="shareOnWhatsApp('${trip.title}')">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="social-btn facebook" onclick="shareOnFacebook('${trip.title}')">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <button class="social-btn copy-link" onclick="copyTripLink(${trip.id})">
                            <i class="fas fa-link"></i>
                        </button>
                    </div>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--gray-light);">
                        <p style="font-size: 0.9rem; color: var(--gray); text-align: center;">
                            <i class="fas fa-headset" style="color: var(--primary); margin-left: 5px;"></i>
                            لديك استفسار؟ <a href="#" style="color: var(--primary);">اتصل بفريق الدعم</a>
                        </p>
                    </div>
                </div>
            `;
            
            // إضافة أحداث لصور المعرض
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const index = this.dataset.index;
                    const mainImage = document.getElementById('tripMainImage');
                    mainImage.src = this.src;
                    
                    thumbnails.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // إضافة حدث لزر التصويت/الحجز
            const tripVoteBtn = document.getElementById('tripVoteBtn');
            tripVoteBtn.addEventListener('click', function() {
                if (trip.status === 'activated') {
                    showNotification('سيتم توجيهك إلى صفحة الحجز', 'info');
                } else {
                    openVoteModal(trip.id, trip.votes, trip.required);
                }
            });
            
            showPage('trip-details');
        }

        // إظهار تفاصيل الوكالة
        function showAgencyDetails(agencyId) {
            const agency = agenciesData.find(a => a.id === agencyId);
            if (!agency) return;
            
            currentAgencyId = agencyId;
            
            // تحديث رأس الوكالة
            const agencyHeader = document.getElementById('agencyHeader');
            agencyHeader.innerHTML = `
                <img src="${agency.logo}" alt="${agency.name}" class="agency-logo">
                <h1 class="agency-title">${agency.name}</h1>
                <div class="agency-rating">
                    ${generateStars(agency.rating)}
                    <span> ${agency.rating} (${agency.stats.travelers}+ تقييم)</span>
                </div>
            `;
            
            // تحديث وصف الوكالة
            const agencyDescription = document.getElementById('agencyDescription');
            agencyDescription.innerHTML = `
                <h3 style="color: white; margin-bottom: 15px;">عن الوكالة</h3>
                <p style="color: rgba(255, 255, 255, 0.9); line-height: 1.8;">${agency.description}</p>
            `;
            
            // تحديث إحصائيات الوكالة
            const agencyStats = document.getElementById('agencyStats');
            agencyStats.innerHTML = `
                <div class="agency-stat">
                    <div class="agency-stat-number">${agency.stats.trips}+</div>
                    <div class="agency-stat-label">رحلة منظمة</div>
                </div>
                <div class="agency-stat">
                    <div class="agency-stat-number">${agency.stats.travelers}+</div>
                    <div class="agency-stat-label">مسافر راضٍ</div>
                </div>
                <div class="agency-stat">
                    <div class="agency-stat-number">${agency.stats.years}+</div>
                    <div class="agency-stat-label">سنة خبرة</div>
                </div>
                <div class="agency-stat">
                    <div class="agency-stat-number">${agency.stats.cities}+</div>
                    <div class="agency-stat-label">ولاية تونسية</div>
                </div>
            `;
            
            // تحديث رحلات الوكالة
            const agencyTrips = allTrips.filter(trip => trip.organizerId === agencyId);
            const agencyTripsGrid = document.getElementById('agencyTripsGrid');
            agencyTripsGrid.innerHTML = '';
            
            if (agencyTrips.length > 0) {
                agencyTrips.forEach(trip => {
                    agencyTripsGrid.appendChild(createTripCard(trip));
                });
            } else {
                agencyTripsGrid.innerHTML = `
                    <div style="text-align: center; padding: 40px; grid-column: 1 / -1;">
                        <i class="fas fa-plane" style="font-size: 3rem; color: var(--gray); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--dark); margin-bottom: 10px;">لا توجد رحلات حالياً</h3>
                        <p style="color: var(--gray);">سيتم إضافة رحلات جديدة قريباً</p>
                    </div>
                `;
            }
            
            // تحديث خلفية الصفحة
            const agencyPage = document.querySelector('.agency-page');
            agencyPage.style.background = `linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('${agency.background}')`;
            agencyPage.style.backgroundSize = 'cover';
            agencyPage.style.backgroundPosition = 'center';
            
            showPage('agency-details');
        }

        // ==================== التصويت على الرحلات ====================

        // فتح نافذة التصويت
        function openVoteModal(tripId, currentVotes, requiredVotes) {
            currentTripId = tripId;
            document.getElementById('currentVoters').textContent = currentVotes;
            document.getElementById('requiredVoters').textContent = requiredVotes;
            document.getElementById('remainingVoters').textContent = requiredVotes - currentVotes;
            document.getElementById('voteModal').classList.add('active');
        }

        // التصويت للرحلة
        async function voteForTrip(tripId) {
            if (!AuthService.isTokenValid()) {
                showNotification('يجب تسجيل الدخول أولاً', 'warning');
                redirectToLogin();
                return;
            }

            try {
                const response = await ApiService.post(`/api/user/vote/${tripId}`, {
                    user_id: AuthService.getUserInfo().user_id
                });

                if (response.success) {
                    // تحديث الحالة المحلية
                    const tripIndex = allTrips.findIndex(t => t.id === tripId);
                    if (tripIndex !== -1) {
                        allTrips[tripIndex].votes++;
                        
                        // التحقق مما إذا تم تفعيل الرحلة
                        if (allTrips[tripIndex].votes >= allTrips[tripIndex].required) {
                            allTrips[tripIndex].status = 'activated';
                        }
                    }
                    
                    // إغلاق النافذة وعرض رسالة النجاح
                    closeModal('voteModal');
                    
                    document.getElementById('successModal').classList.add('active');
                    
                    // تحديث الواجهة
                    if (currentSection === 'home') {
                        renderFeaturedTrips();
                    } else if (currentSection === 'trips') {
                        renderAllTrips();
                    } else if (currentSection === 'trip-details') {
                        showTripDetails(tripId);
                    }
                }
            } catch (error) {
                console.error('Error voting:', error);
                showNotification(error.message || 'فشل في التصويت', 'error');
            }
        }

        // ==================== مشاركة وسائل التواصل ====================

        // مشاركة على WhatsApp
        function shareOnWhatsApp(title) {
            const url = window.location.href.split('#')[0];
            const text = `انظر إلى هذه الرحلة الرائعة: ${title}\n${url}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        // مشاركة على Facebook
        function shareOnFacebook(title) {
            const url = window.location.href.split('#')[0];
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }

        // نسخ رابط الرحلة
        function copyTripLink(tripId) {
            const url = window.location.href.split('#')[0] + `#trip=${tripId}`;
            navigator.clipboard.writeText(url).then(() => {
                showNotification('تم نسخ رابط الرحلة', 'success');
            }).catch(() => {
                showNotification('فشل في نسخ الرابط', 'error');
            });
        }

        // ==================== الفلترة ====================

        // تصفية الرحلات في الصفحة الرئيسية
        function filterTrips() {
            const city = document.getElementById('citySelect').value;
            const type = document.getElementById('typeSelect').value;
            const budget = document.getElementById('budgetSelect').value;
            
            let filteredTrips = featuredTrips;
            
            if (city) {
                filteredTrips = filteredTrips.filter(trip => trip.city === city);
            }
            
            if (type) {
                filteredTrips = filteredTrips.filter(trip => trip.type === type);
            }
            
            if (budget) {
                const [min, max] = budget === '500+' ? [500, Infinity] : budget.split('-').map(Number);
                filteredTrips = filteredTrips.filter(trip => {
                    if (max === Infinity) return trip.price >= min;
                    return trip.price >= min && trip.price <= max;
                });
            }
            
            renderFeaturedTrips();
            
            if (filteredTrips.length === 0) {
                const container = document.getElementById('featuredTripsGrid');
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; grid-column: 1 / -1;">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--gray); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--dark); margin-bottom: 10px;">لا توجد رحلات مطابقة</h3>
                        <p style="color: var(--gray);">جرب تغيير معايير البحث</p>
                    </div>
                `;
            }
            
            showNotification(`تم العثور على ${filteredTrips.length} رحلة`, 'info');
        }

        // تصفية جميع الرحلات
        function filterAllTrips() {
            const city = document.getElementById('tripsCitySelect').value;
            const status = document.getElementById('tripsStatusSelect').value;
            const price = document.getElementById('tripsPriceSelect').value;
            
            let filteredTrips = allTrips;
            
            if (city) {
                filteredTrips = filteredTrips.filter(trip => trip.city === city);
            }
            
            if (status) {
                filteredTrips = filteredTrips.filter(trip => trip.status === status);
            }
            
            if (price) {
                const [min, max] = price === '500+' ? [500, Infinity] : price.split('-').map(Number);
                filteredTrips = filteredTrips.filter(trip => {
                    if (max === Infinity) return trip.price >= min;
                    return trip.price >= min && trip.price <= max;
                });
            }
            
            renderAllTrips(filteredTrips);
            
            if (filteredTrips.length === 0) {
                const container = document.getElementById('allTripsGrid');
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; grid-column: 1 / -1;">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--gray); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--dark); margin-bottom: 10px;">لا توجد رحلات مطابقة</h3>
                        <p style="color: var(--gray);">جرب تغيير معايير البحث</p>
                    </div>
                `;
            }
            
            showNotification(`تم العثور على ${filteredTrips.length} رحلة`, 'info');
        }

        // ==================== الدوال المساعدة ====================

        // إغلاق النافذة المنبثقة
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // توليد نجوم التقييم
        function generateStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // الحصول على نص الحالة
        function getStatusText(status) {
            switch (status) {
                case 'voting': return 'قيد التصويت';
                case 'activated': return 'مفعلة';
                case 'completed': return 'مكتملة';
                default: return 'غير معروف';
            }
        }

        // الحصول على أيام عشوائية
        function getRandomDays() {
            return Math.floor(Math.random() * 30) + 1;
        }

        // تحديث عدد الرحلات
        function updateTripsCount(count = null) {
            const tripsCount = document.getElementById('tripsCount');
            tripsCount.textContent = count || allTrips.length;
        }

        // تحديث عدد الوكالات
        function updateAgenciesCount() {
            const agenciesCount = document.getElementById('agenciesCount');
            agenciesCount.textContent = agenciesData.length;
        }

        // إظهار تلميحات
        function initializeTooltips() {
            // هذه الوظيفة يمكن تطويرها لاحقاً لإضافة تلميحات على العناصر
        }

        // إعادة تحميل البيانات
        function reloadPageData() {
            loadInitialData();
        }

        // ==================== التصفح والروابط ====================

        // إعادة التوجيه إلى تسجيل الدخول
        function redirectToLogin() {
            showNotification('يجب تسجيل الدخول أولاً', 'warning');
            window.location.href = '/login';
        }

        // إعادة التوجيه إلى تسجيل دخول الوكالة
        function redirectToAgencyLogin() {
            showNotification('إنشاء رحلة مخصص للوكالات', 'info');
            window.location.href = '/agency/login';
        }

        // بدء تشغيل الصفحة من الهاش
        function initPageFromHash() {
            const hash = window.location.hash.substring(1);
            if (hash.startsWith('trip=')) {
                const tripId = parseInt(hash.split('=')[1]);
                if (tripId && allTrips.find(t => t.id === tripId)) {
                    showTripDetails(tripId);
                    return;
                }
            } else if (hash.startsWith('agency=')) {
                const agencyId = parseInt(hash.split('=')[1]);
                if (agencyId && agenciesData.find(a => a.id === agencyId)) {
                    showAgencyDetails(agencyId);
                    return;
                }
            }
            showPage('home');
        }

        // مراقبة تغيير الهاش
        window.addEventListener('hashchange', function() {
            initPageFromHash();
        });

        // مراقبة تغيير الحالة
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                document.getElementById('mobileNav').classList.remove('active');
            }
        });
    </script>
</body>
</html>
